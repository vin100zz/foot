<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulateur de championnat</title>
  <link rel="stylesheet" href="./styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%23fff' stroke='%23000' stroke-width='2'/><path d='M50 10 L65 30 L50 35 L35 30 Z' fill='%23000'/><path d='M50 90 L65 70 L50 65 L35 70 Z' fill='%23000'/><path d='M10 50 L30 35 L35 50 L30 65 Z' fill='%23000'/><path d='M90 50 L70 35 L65 50 L70 65 Z' fill='%23000'/><circle cx='50' cy='50' r='8' fill='%23000'/></svg>">
</head>
<body>
  <!-- Page d'accueil -->
  <div id="home-screen" class="screen active">
    <div class="home-container">
      <h1>âš½ Simulateur de Championnat</h1>
      <p>Choisissez une compÃ©tition :</p>
      <div class="competitions-list">
        <button class="competition-btn" data-competition="english-premier" aria-label="Lancer le championnat anglais">
          <div class="competition-icon">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿</div>
          <div class="competition-name">Premier League</div>
          <div class="competition-desc">8 Ã©quipes anglaises</div>
        </button>
        <button class="competition-btn" data-competition="italian-serie" aria-label="Lancer la Serie A italienne">
          <div class="competition-icon">ğŸ‡®ğŸ‡¹</div>
          <div class="competition-name">Serie A</div>
          <div class="competition-desc">8 Ã©quipes italiennes</div>
        </button>
        <button class="competition-btn" data-competition="spanish-laliga" aria-label="Lancer la La Liga espagnole">
          <div class="competition-icon">ğŸ‡ªğŸ‡¸</div>
          <div class="competition-name">La Liga</div>
          <div class="competition-desc">8 Ã©quipes espagnoles</div>
        </button>
        <button class="competition-btn" data-competition="french-ligue1" aria-label="Lancer la Ligue 1 franÃ§aise">
          <div class="competition-icon">ğŸ‡«ğŸ‡·</div>
          <div class="competition-name">Ligue 1</div>
          <div class="competition-desc">8 Ã©quipes franÃ§aises</div>
        </button>
        <button class="competition-btn" data-competition="german-bundesliga" aria-label="Lancer la Bundesliga allemande">
          <div class="competition-icon">ğŸ‡©ğŸ‡ª</div>
          <div class="competition-name">Bundesliga</div>
          <div class="competition-desc">8 Ã©quipes allemandes</div>
        </button>
        <button class="competition-btn" data-competition="euro" aria-label="Lancer l'Euro">
          <div class="competition-icon">ğŸ†</div>
          <div class="competition-name">Euro</div>
          <div class="competition-desc">32 nations, 8 groupes</div>
        </button>
      </div>
    </div>
  </div>

  <!-- Ã‰cran du championnat -->
  <div id="championship-screen" class="screen">
    <header>
      <h1 id="championship-title">âš½ Championnat</h1>
      <div class="header-actions">
        <button id="btn-random-all" title="Simuler tous les matches">â–¶</button>
        <button id="btn-reset" title="Retour Ã  l'accueil">â†»</button>
      </div>
    </header>
    <main>
      <section class="matches">
        <!-- Les journÃ©es et matches seront injectÃ©s ici -->
        <div id="rounds"></div>
      </section>
      <aside class="standings">
        <h2>Classement</h2>
        <table id="table-standings">
          <thead>
            <tr><th>#</th><th>Ã‰quipe</th><th>Pts</th><th>Diff</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </aside>
    </main>
  </div>

  <template id="match-row-template">
    <div class="match-row">
      <div class="team home">
        <span class="kit" aria-hidden="true"></span>
        <span class="name"></span>
      </div>
      <div class="score">
        <input type="number" class="g home-goals" min="0" aria-label="Buts domicile" />
        <span class="sep">-</span>
        <input type="number" class="g away-goals" min="0" aria-label="Buts extÃ©rieur" />
      </div>
      <div class="team away">
        <span class="name"></span>
        <span class="kit" aria-hidden="true"></span>
      </div>
      <div class="actions">
        <button class="btn-sim" aria-label="Simuler ce match" title="Simuler ce match">â–¶</button>
      </div>
    </div>
  </template>

  <script src="./config.js"></script>
  <script>
    // GÃ©nÃ©rer dynamiquement le CSS des kits depuis la configuration
    function generateKitsCSS(){
      if(typeof ALL_COMPETITIONS !== 'undefined'){
        const style = document.createElement('style');
        let css = '';

        // GÃ©nÃ©rer les CSS pour tous les kits de toutes les compÃ©titions
        Object.values(ALL_COMPETITIONS).forEach(comp => {
          // GÃ©rer le cas de l'Euro qui a une fonction getTeams()
          const teams = comp.getTeams ? comp.getTeams() : comp.teams;
          if(!teams) return;

          teams.forEach(team => {
            const shadow = team.kit.shadow === 'inset'
              ? ';box-shadow:0 1px 3px rgba(0,0,0,0.15) inset'
              : '';
            css += `.kit.team-${team.id}{background:${team.kit.bg}${shadow}}\n`;
          });
        });

        style.textContent = css;
        document.head.appendChild(style);
      } else if(typeof COMPETITIONS !== 'undefined'){
        // Fallback pour les anciennes versions
        const style = document.createElement('style');
        let css = '';
        Object.values(COMPETITIONS).forEach(comp => {
          comp.teams.forEach(team => {
            const shadow = team.kit.shadow === 'inset'
              ? ';box-shadow:0 1px 3px rgba(0,0,0,0.15) inset'
              : '';
            css += `.kit.team-${team.id}{background:${team.kit.bg}${shadow}}\n`;
          });
        });
        style.textContent = css;
        document.head.appendChild(style);
      }
    }

    // GÃ©nÃ©rer les CSS dÃ¨s que le script est chargÃ©
    generateKitsCSS();
  </script>
  <script src="./app.js"></script>
</body>
</html>
